{% extends "graphgamel/index.html" %}

{% load adminmedia %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url graph.views.index %}">Home</a>&rsaquo;
    <a href="{% url graph.views.editor graph_id %}">Editor</a>&rsaquo;
    <span>Browser</span>
</div>
{% endblock %}

{% block extracode %}
<script type="application/javascript">
    window.onload = function() {
        GRAPHGAMEL.get_autocompletion_objects("searchbar", "searchbar");
    }
</script>
{% endblock %}

{% block content %}
<h1>Browser</h1>
<h3>Browse nodes by type</h3>
<ul>
{% for node_type in node_types %}
    <p><a href="{% url graph.views.search_nodes_by_field graph_id '_type' node_type %}">{{ node_type }}</a></p>
{% endfor %}
</ul>
<h3>Search by id</h3>
<form class="search_box" action="{% url graph.views.search_node graph_id %}" method="get">
    <label class="search_label" for="searchbar"><img src="{% admin_media_prefix %}img/admin/icon_searchbox.png" alt="Search" /></label>
    <input type="text" size="80" name="field_value" value="{{ search_string }}" id="searchbar" />
    <input type="submit" value="Search" />
</form>
{% if result_list %}
    {% for result in result_list %}
        <ul>
            <li>
                <a class="changelink" href="{% url graph.views.node_info graph_id result.neo_id %}">
                    {{ result.slug }} ({{ result.type }})
                </a>
            </li>
        </ul>
    {% endfor %}
{% else %}
    No results found
{% endif %}
{% endblock %}
