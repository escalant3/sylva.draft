{% extends "graphgamel/index.html" %}

{% load adminmedia %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url graph.views.index %}">Home</a>&rsaquo;
    <a href="{% url graph.views.editor graph_id %}">Editor</a>&rsaquo;
    <span>Browser</span>
</div>
{% endblock %}

{% block extracode %}
<script type="application/javascript">
    window.onload = function() {
        GRAPHGAMEL.get_autocompletion_objects("searchbar", "searchbar");
    }
</script>
{% endblock %}

{% block content %}
<h1>Browser</h1>
<p><a target="_blank" href="{% url graph.views.visualize_all graph_id %}">Visualize graph</a></p>

<h3>Node types</h3>
{% for node_type in node_types %}
    <a href="{% url graph.views.search_nodes_by_field graph_id '_type' node_type %}">{{ node_type }}</a>
{% endfor %}
<h3>Edge types</h3>
{% for edge_type in edge_types %}
    <a href="{% url graph.views.search_relationships_by_field graph_id '_type' edge_type %}">{{ edge_type }}</a>
{% endfor %}

<form class="search_box" action="{% url graph.views.search_node graph_id %}" method="get">
    <label class="search_label" for="searchbar"><img src="{% admin_media_prefix %}img/admin/icon_searchbox.png" alt="Search" /></label>
    <input type="text" size="80" name="field_value" value="{{ search_string }}" id="searchbar" />
    <input type="submit" value="Search" />
</form>
<div class="results">
{% if node_result_list or relationship_result_list %}
    <table id="result_list" cellspacing="0">
    <thead>
        <tr>
        <th class="action-checkbox-column" scope="col">
        </th>
        <th scope="col">
        </th>
        </tr>
    </thead>
    <tbody>
    {% for result in node_result_list %}
        <tr class="{% cycle 'row1' 'row2' %}">
            <td class="action-checkbox">
                <input id="action-select" type="checkbox" name="_selected_action" id="4">
            </td>
            <th>
                <a href="{% url graph.views.node_info graph_id result.neo_id %}">
                    {{ result.properties.slug }} ({{ result.properties.type }})
                </a>
            </th>
        </tr>
    {% endfor %}
    </tbody>
    </table>
    <table id="result_list" cellspacing="0">
    <thead>
        <tr>
        <th class="action-checkbox-column" scope="col">
        </th>
        <th scope="col">
        </th>
        </tr>
    </thead>
    <tbody>
    {% for result in relationship_result_list %}
        <tr class="{% cycle 'row1' 'row2' %}">
            <td class="action-checkbox">
                <input id="action-select" type="checkbox" name="_selected_action" id="4">
            </td>
            <th>
                <a href="{% url graph.views.relation_info graph_id result.neo_id %}">
                    {{ result.properties.slug }} ({{ result.properties.type }})
                </a>
            </th>
        </tr>
    {% endfor %}
    </tbody>
    </table>

{% else %}
    No results found
{% endif %}
</div>
{% endblock %}
