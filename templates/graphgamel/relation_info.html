{% extends "graphgamel/index.html" %}

{% load i18n %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url graph.views.index %}">Home</a>&rsaquo;
    <a href="{% url graph.views.editor graph_id%}">Editor</a>&rsaquo;
    <a href="{% url graph.views.relation_info graph_id start_node_id edge_type end_node_id%}">Relation Info</a>
</div>
{% endblock %}

{% block extracode %}
<script type="application/javascript">
    window.onload = function() {
        {% if authorized %}
            GRAPHGAMEL.authenticated = true;
        {% else %}
            GRAPHGAMEL.authenticated = false;
        {% endif %}
        GRAPHGAMEL.populate_table('properties_table', {{ properties|safe }});
        GRAPHGAMEL.populate_table('start_node_properties_table', {{ start_node_properties|safe }});
        GRAPHGAMEL.populate_table('end_node_properties_table', {{ end_node_properties|safe }});
    }
</script>
{% endblock %}

{% block content %}
<div id="main">
<h1>Relationship info</h1>
    {% if user.is_authenticated and not authorized %}
    <p class="nopermission">READ ONLY MODE<br/>
    Your user is not able to edit this data. If you 
    want to add information, please log in as an authorized user.</p>
    {% endif %}

    <h3>Actions</h3>
    {% if authorized %}
    <a class="deletelink" onclick="GRAPHGAMEL.delete_relationship()">Delete this relationship</a>
    {% endif %}
    
<h3>Properties</h3>
<table id="properties_table" class="properties"></table>
{% if authorized %}
    <h5>Add property</h5>
        <input type="text" id="new_property_key">
        <input type="text" id="new_property_value">
        <input type="button" value="Add new property" onClick="GRAPHGAMEL.add_property()">
{% endif %}
<h3>Node from</h3>
<a href="{% url graph.views.node_info graph_id start_node_id %}">Open this node</a>
<table id="start_node_properties_table" class="properties"></table>
<h3>Node to</h3>
<a href="{% url graph.views.node_info graph_id end_node_id %}">Open this node</a>
<table id="end_node_properties_table" class="properties"></table>
</div>
{% endblock %}
