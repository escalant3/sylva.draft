{% extends "admin/change_list.html" %}

{% load adminmedia %}
{% load i18n %}

{% block title %}Sylva{% endblock %}

{% block branding %}
<h1 id="site-name">Sylva</h1>
<div id="user-tools">
{% if user.is_active %}
    {% trans 'Welcome,' %}
    <strong>{% firstof user.first_name user.username %}</strong>.
    {% block userlinks %}
        <a href="{% url admin:index %}">Admin</a> /
        {% url admin:password_change as password_change_url %}
        {% if password_change_url %}
            <a href="{{ password_change_url }}">
        {% else %}
            <a href="{{ root_path }}password_change/">
        {% endif %}
        {% trans 'Change password' %}</a> /
        <a href="{% url django.contrib.auth.views.logout %}?next={% url graph.views.index %}">{% trans 'Log out' %}</a>
    {% endblock %}
{% else %}
    <a href="{% url django.contrib.auth.views.login %}?next={% url graph.views.index %}">{% trans 'Log in' %}</a>
{% endif %}
</div>
{% endblock %}

{% block extrahead %}
    {% block extraimports %}
    <script type="text/javascript" src="/media/js/admin/RelatedObjectLookups.js"></script> 
    <link rel="stylesheet" type="text/css" href="/site_media/css/graphgamel.css"/>
    <script language="javascript" src="/site_media/js/jquery-1.3.2.min.js"></script>
    <script language="javascript" src="/site_media/js/graphgamel.js"></script>
    <!-- jQuery autocompletion plugin -->
    <link rel="stylesheet" href="/site_media/css/jquery_plugins/jquery.autocomplete.css" type="text/css" />
    <script type="text/javascript" src="/site_media/js/jquery_plugins/jquery.bgiframe.min.js"></script>
    <script type="text/javascript" src="/site_media/js/jquery_plugins/jquery.autocomplete.js"></script>
    {% endblock %}
    {% block extracode %}
    {% endblock %}
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url graph.views.index %}">Home</a>
</div>
{% endblock %}

{% block content %}
<h1>Available Graphs</h1>
{% if error_message %}
    <p class="errornote">Error: {{ error_message }}</p>
{% endif %}
<ul>
<a id="add_id_graphdb" class="add-another" onclick="return showAddAnotherPopup(this);" href="/admin/schema/graphdb/add/">
    <img width="10" height="10" alt="Add Another" src="/media/img/admin/icon_addlink.gif">
    Add new graph
</a>
{% for graph in graph_list %}
    <li>
        <h3>{{ graph.name }}: {{ graph.description }}</h3>
        <ul>
        <li><a class="changelink" href="{% url schema.views.schema_editor graph.id %}">Edit schema</a></li>
        <li><a class="changelink" href="{% url graph.views.editor graph.id %}">Edit graph</a></li>
        <li><a href="{% url graph.views.search_node graph.id %}">
            Browse data
        </a></li>
        </ul>
    </li>
{% endfor %}
</ul>
{% if user.is_superuser %}
<h1>Sylva Management</h1>
    <ul>
        <li>
            <a href="{% url graph.views.import_manager %}">CSV Importer Manager</a>
        </li>
    </ul>
{% endif %}
{% endblock %}
