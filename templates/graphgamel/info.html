{% extends "graphgamel/index.html" %}

{% load i18n %}

{% block breadcrumbs %}{% endblock %}

{% block extrahead %}
<script language="javascript" src="/site_media/js/jquery-1.3.2.min.js"></script>
<script type="application/javascript">
    function add_property() {
        property_key = document.getElementById('new_property_key').value;
        property_value = document.getElementById('new_property_value').value;
        $.ajax({url: location.href + "add_property",
                dataType: "html",
                type: "GET",
                data: {property_key: property_key,
                        property_value: property_value},
                success: function success(response){console.log(response);
                                            table = document.getElementById('properties_table');
                                            tr = document.createElement('tr');
                                            td = document.createElement('td');
                                            td.appendChild(document.createTextNode(property_key));
                                            tr.appendChild(td);
                                            td = document.createElement('td');
                                            td.appendChild(document.createTextNode(property_value));
                                            tr.appendChild(td);
                                            table.appendChild(tr);}});
    }
</script>
{% endblock %}

{% block content %}
<h1>Node info</h1>
<h3>Properties</h3>
<table id="properties_table" class="properties">
{% for property in properties %}
    <tr>
        <td>{{ property.0 }}:</td><td>{{ property.1 }}</td>
    </tr>
{% endfor %}
</table>
<h5>Add property</h5>
    <input type="text" id="new_property_key"/>
    <input type="text" id="new_property_value"/>
    <input type="button" value="Add new property" onClick="add_property()"/>
<h3>Relationships</h3>
<table>
{% for relation in relationships %}
    <tr>
        <td><a href="{{ relation.start_url }}">{{ relation.start_id }}</a>
            ({{ relation.start_type }})</td>
        <td>{{ relation.relation_type }}</td>
        <td><a href="{{ relation.end_url }}">{{ relation.end_id }}</a>
            ({{ relation.end_type }})</td>
        <td><a href="{{ relation.relation_url }}">Go</a></td>
    <tr>
{% endfor %}
</table>
<h5>Add incoming relationship</h5>
<h5>Add outgoing relationship</h5>
{% endblock %}
